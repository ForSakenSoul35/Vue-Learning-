<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>todolist</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<body>
    <div id="app">
      <!-- 
        v-model 指令：指的是数据的双向绑定
        当input框发生改变时 inputValue会发生改变
        当inputValue发生改变时 页面上的input也会发生改变
      -->
      <input type="text" v-model ="inputValue"/>
      <!-- 
        v-on指令 绑定事件
       -->
      <button v-on:click = "handleBtnClick">提交</button>
      <ul>
        <!-- 
          v-for = "item in list"
          循环list中的每一项 并把每一项都放在item中
         -->
         <!-- <li v-for="item in list" v-on:click="handleItemClick(index)">{{item}}</li> -->
         <todo-item v-bind:content = "item"  v-bind:index ="index" v-for="(item,index) in list" v-on:delete="handleItemDelete"></todo-item>
         <!-- 命名结构？ -->
         <!-- v-bind 可以简写为: -->
      </ul>
    </div>
    <script>
    /*
    三个指令：
    循环遍历元素 v-for
    数据双向绑定 v-model
    事件绑定  v-on
      
    
    */

    // Vue.component("TodoItem",{
    //   // 定义全局组件
    //   props:['content'],
    //   template:"<li>{{content}}</li>"
    // });
    var TodoItem = {
      // v-on：click 可以简写为 @click
      props:['content','index'],
      template:"<li v-on:click = 'handleItemClick'>{{content}}</li>",
      methods:{
        handleItemClick:function(){
          this.$emit("delete",this.index)
        }
      }
    }
    var app = new Vue({
      el:'#app',
      components:{
        // 子组件
        TodoItem : TodoItem
        
      },
      data:{
        list:[],
        inputValue:''
      },
      methods:{
        handleBtnClick:function(){
          this.list.push(this.inputValue);
          this.inputValue = '';        
        },
        handleItemDelete:function(index){
          this.list.splice(index,1);
        }
      }
    })
    </script>
</body>
</html>
